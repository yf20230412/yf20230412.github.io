import{_ as s,L as t,c as n,o as p,ah as o,x as l}from"./chunks/framework.C-kv8JbB.js";const v=JSON.parse('{"title":"serv00免费10年虚拟主机安装PM2和Vless","description":"","frontmatter":{},"headers":[],"relativePath":"blog/sev00.md","filePath":"blog/sev00.md","lastUpdated":null}'),d={name:"blog/sev00.md"};function i(c,e,r,h,b,g){const a=t("LastUpdated");return p(),n("div",null,[e[0]||(e[0]=o(`<h1 id="serv00免费10年虚拟主机安装pm2和vless" tabindex="-1">serv00免费10年虚拟主机安装PM2和Vless <a class="header-anchor" href="#serv00免费10年虚拟主机安装pm2和vless" aria-label="Permalink to &quot;serv00免费10年虚拟主机安装PM2和Vless&quot;">​</a></h1><p>这几天在论坛里面看到一个免费10年的虚拟主机<a href="https://www.serv00.com/" target="_blank" rel="noreferrer">serv00</a>。简单注册了一下就可以使用了，账号和密码会直接发到注册的邮箱里，我这里使用了Gmail的邮箱。下面就是记录一下自己搭建的东西。</p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><ol><li>【开启权限】第一步需要做的就是开启可以运行自己应用的权限。<code>Additional services -&gt; Run your own applications -&gt; Enabled</code> 如果不开启这一项，自己的用户目录下的所有文件都无法添加可执行权限。</li><li>【进入SSH】通过注册邮箱里收到的信息，用<code>MobaXterm</code>登录，就可以看到下面的信息。</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  ____                   ___   ___</span></span>
<span class="line"><span> / ___|  ___ _ ____   __/ _ \\ / _ \\  ___ ___  _ __ ___</span></span>
<span class="line"><span> \\___ \\ / _ \\ &#39;__\\ \\ / / | | | | | |/ __/ _ \\| &#39;_ \` _ \\</span></span>
<span class="line"><span>  ___) |  __/ |   \\ V /| |_| | |_| | (_| (_) | | | | | |</span></span>
<span class="line"><span> |____/ \\___|_|    \\_/  \\___/ \\___(_)___\\___/|_| |_| |_|</span></span>
<span class="line"><span>  Revolutionary Free Hosting</span></span>
<span class="line"><span></span></span>
<span class="line"><span> =[ Basic account info ]=</span></span>
<span class="line"><span>         Username: Meekdai</span></span>
<span class="line"><span>             Plan: FREE</span></span>
<span class="line"><span>  Expiration date: 2034-03-16 19:18:41</span></span></code></pre></div><h2 id="安装pm2" tabindex="-1">安装PM2 <a class="header-anchor" href="#安装pm2" aria-label="Permalink to &quot;安装PM2&quot;">​</a></h2><p><a href="https://pm2.io/" target="_blank" rel="noreferrer">PM2</a>是一款非常优秀的<code>node.js</code>进程管理工具。可以通过SSH用下面的指令一键安装。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>bash &lt;(curl -s https://raw.githubusercontent.com/k0baya/alist_repl/main/serv00/install-pm2.sh)</span></span></code></pre></div><p>使用<code>pm2</code>，请直接用路径调用：<code>~/.npm-global/bin/pm2</code>，例如<code>~/.npm-global/bin/pm2 list</code>就可以看到自己添加的应用。</p><p>另外，在<code>SSH</code>中通过下面的指令就可以开启页面监控功能。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.npm-global/bin/pm2 monitor</span></span></code></pre></div><p>如果没有账号可以按照提示创建就可以，然后会给出登录页面的地址。 <a href="https://app.pm2.io/#/bucket/65f3be6efe520b3f5503d9aa" target="_blank" rel="noreferrer">https://app.pm2.io/#/bucket/65f3be6efe520b3f5503d9aa</a> 用浏览器登录就可以看到了，非常的方便。</p><h2 id="安装vless" tabindex="-1">安装Vless <a class="header-anchor" href="#安装vless" aria-label="Permalink to &quot;安装Vless&quot;">​</a></h2><p>Vless是一个代理节点应用，可以通过SSH用下面的指令一键安装。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd ~/domains &amp;&amp; git clone https://github.com/qwer-search/serv00-vless &amp;&amp; mv -f serv00-vless vless &amp;&amp; cd vless &amp;&amp; rm -f README.md</span></span></code></pre></div><p>在serv00的管理页面上开启一个端口，<code>Port reservation -&gt; Add port</code>添加一个<code>TCP</code>的端口号。再在<code>File Manager </code>里面找到<code>Vless</code>的文件下的<code>app.js</code>文件，修改里面的端口号为刚刚添加的端口号。类似下面修改为了<code>12345</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const port = process.env.PORT || 12345;</span></span></code></pre></div><p>安装依赖</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install</span></span></code></pre></div><p>安装完毕后，使用<code>PM2</code>启动并守护vless进程：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.npm-global/bin/pm2 start app.js --name vless</span></span></code></pre></div><p>接着去你的代理客户端软件中手动添加vless配置即可：</p><table tabindex="0"><thead><tr><th>Key</th><th style="text-align:left;">Value</th></tr></thead><tbody><tr><td><strong>地址</strong></td><td style="text-align:left;">Panel 中 WWW Websites 选项卡里的你的 Domain name</td></tr><tr><td><strong>端口</strong></td><td style="text-align:left;">你放行的端口</td></tr><tr><td><strong>用户 ID</strong></td><td style="text-align:left;">37a0bd7c-8b9f-4693-8916-bd1e2da0a817</td></tr><tr><td><strong>传输协议</strong></td><td style="text-align:left;">ws</td></tr><tr><td><strong>伪装域名</strong></td><td style="text-align:left;">同地址</td></tr><tr><td><strong>ws path</strong></td><td style="text-align:left;">/</td></tr></tbody></table><p>上表没有给出的可以不填。</p><p>我用的客户端是<a href="https://v2raya.org/docs/prologue/quick-start/" target="_blank" rel="noreferrer">v2rayA</a>，按照这个配置就行。目前测试下来连接不是很稳定，延迟比较高，有<code>1000ms</code>以上。</p><h2 id="自动化" tabindex="-1">自动化 <a class="header-anchor" href="#自动化" aria-label="Permalink to &quot;自动化&quot;">​</a></h2><p>听说<code>serv00</code>会不定时重启机器，所以我们把<code>PM2</code>添加开机自启。而且<code>serv00</code>每三个月内必须要有一次登录面板或者<code>SSH</code>连接，不然会删号，也可以通过一个脚本解决问题，接下来我会详细说明。</p><h2 id="自动续期" tabindex="-1">自动续期 <a class="header-anchor" href="#自动续期" aria-label="Permalink to &quot;自动续期&quot;">​</a></h2><p>新建 auto-renew.sh 脚本：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cat &gt; auto-renew.sh &lt;&lt; EOF</span></span>
<span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span></span></span>
<span class="line"><span>while true; do</span></span>
<span class="line"><span>  sshpass -p &#39;密码&#39; ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -tt 用户名@地址 &quot;exit&quot; &amp;</span></span>
<span class="line"><span>  sleep 259200  #30天为259200秒</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span>EOF</span></span></code></pre></div><p>我是新建了一个<code>opt</code>目录，在<code>opt</code>目录下创建这个脚本。另外记得把其中的密码、用户名、ssh的地址修改为你自己的。</p><p>给 <code>auto-renew.sh</code>添加可执行权限：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>chmod +x auto-renew.sh</span></span></code></pre></div><p>使用PM2启动：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.npm-global/bin/pm2 start ./auto-renew.sh</span></span></code></pre></div><p>这样就会每隔一个月自动执行一次SSH连接，自己SSH自己进行续期。</p><h2 id="自动启动" tabindex="-1">自动启动 <a class="header-anchor" href="#自动启动" aria-label="Permalink to &quot;自动启动&quot;">​</a></h2><p>在serv00的管理页面上找到<code>Cron jobs</code>选项卡，使用<code>Add cron job</code>功能添加任务，<code>Specify time</code>选择<code>After reboot</code>，即为重启后运行。<code>Form type</code>选择<code>Advanced</code>，<code>Command</code>写：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/home/你的用户名/.npm-global/bin/pm2 resurrect</span></span></code></pre></div><p>添加完之后，在<code>SSH</code>窗口保存<code>PM2</code>的当前任务列表快照：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.npm-global/bin/pm2 save</span></span></code></pre></div><p>这样每次<code>serv00</code>不定时重启任务时，都能自动调用<code>PM2</code>读取保存的任务列表快照，恢复任务列表。如果在保存了任务列表快照后又改变了任务<code>PM2</code>的任务列表，需要重新执行<code>pm2 save</code>以更新任务列表。</p><p>参考链接：<a href="https://docs.serv00.com/" target="_blank" rel="noreferrer">https://docs.serv00.com/</a></p><p>参考链接：<a href="https://blog.rappit.site/2024/01/27/serv00_logs/" target="_blank" rel="noreferrer">https://blog.rappit.site/2024/01/27/serv00_logs/</a></p>`,44)),l(a)])}const u=s(d,[["render",i]]);export{v as __pageData,u as default};
