<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨</title>
    <style>
/* æ’­æ”¾å™¨å®¹å™¨æ ·å¼ */
        
        .music-player {
            position: fixed;
            right: -250px;
            /* åˆå§‹éšè—åœ¨å±å¹•å¤– */
            bottom: 60px;
            display: flex;
            align-items: center;
            /* background-color: rgba(255, 255, 255, 0.9);*/
            background-image: url('https://yf1688.top/static/music/999.jpg');
            background-size: cover;
            /* èƒŒæ™¯å›¾ç‰‡å¤§å°ï¼Œè¿™é‡Œè®¾ç½®ä¸ºè¦†ç›–æ•´ä¸ªå®¹å™¨ï¼Œå¯æŒ‰éœ€è°ƒæ•´ */
            background-repeat: no-repeat;
            /* èƒŒæ™¯å›¾ç‰‡ä¸é‡å¤ */
            backdrop-filter: blur(5px);
            /* æ·»åŠ æ¨¡ç³Šæ•ˆæœï¼Œæ•°å€¼5pxè¡¨ç¤ºæ¨¡ç³Šç¨‹åº¦ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
            -webkit-backdrop-filter: blur(5px);
            /* é’ˆå¯¹webkitå†…æ ¸çš„æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Safariï¼‰çš„å‰ç¼€å†™æ³• */
            padding: 15px;
            /* ä¿®æ”¹è¾¹æ¡†åœ†è§’å±æ€§ */
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            /* è°ƒæ•´é˜´å½±æ•ˆæœï¼Œä¸éŸ³ä¹åˆ—è¡¨ä¸€è‡´ */
            transition: right 0.5s ease-in-out;
            z-index: 1000;
            /* ç¡®ä¿æ’­æ”¾å™¨åœ¨æœ€ä¸Šå±‚ */
        }
        /* å€’é€€å’Œå¿«è¿›æŒ‰é’®çš„å›¾æ ‡æ ·å¼ */
        
        .controls-row-secondary {
            display: flex;
            justify-content: space-between;
            /* ä½¿æŒ‰é’®ä¸¤ç«¯å¯¹é½ */
            align-items: center;
            width: 100%;
            /* ç¡®ä¿å®¹å™¨å®½åº¦ä¸ç¬¬ä¸€æ’ä¸€è‡´ */
        }
        
        .rewind-icon,
        .fast-forward-icon {
            font-size: 20px;
            color: white;
            font-weight: bold;
        }
        
        .controls-row-secondary button[disabled] {
            opacity: 0;
            /* ä½¿å ä½æŒ‰é’®ä¸å¯è§ */
            pointer-events: none;
            /* ç¦ç”¨é¼ æ ‡äº‹ä»¶ */
        }
        /*
/*
#rewind-btn {
    position: relative; /* æˆ–è€…ç»å¯¹å®šä½ */
        /*left: 15px;  å‘å³ç§»åŠ¨ 15px */
    }
    /*#fast-forward-btn {
    position: relative;
    left: -15px; /* å‘å·¦ç§»åŠ¨ 15px */
}
*/
/* æ§åˆ¶å™¨å®¹å™¨æ ·å¼ */
.controls-container {
    display: flex;
    flex-direction: column;
    /* å‚ç›´æ’åˆ—å­å…ƒç´  */
    align-items: center;
    /* æ°´å¹³å±…ä¸­å¯¹é½ */
    width: 100%;
    /* å®¹å™¨å®½åº¦ */
    padding-bottom: 2px;
    /* è·ç¦»åº•éƒ¨2px */
    box-sizing: border-box;
    /* åŒ…å«å†…è¾¹è·å’Œè¾¹æ¡† */
}

/* æ’­æ”¾å™¨å±•å¼€æ—¶çš„æ ·å¼ */
.music-player.expanded {
    right: 10px;
    /* å®Œå…¨æ˜¾ç¤º */
}

/* éšè—æ—¶çš„å·¦ä¾§è¾¹æ¡†æ ·å¼ */
.toggle-border {
    position: absolute;
    left: -20px;
    /* ä½äºæ’­æ”¾å™¨å·¦ä¾§ */
    width: 20px;
    height: 50%;
    /* å›ºå®šé«˜åº¦ */
    background-color: rgba(182,
    184,
    179,
    0.35);
    /* ä¿®æ”¹ä¸ºåŠé€æ˜çš„èƒŒæ™¯è‰²ï¼Œè¿™é‡Œè®¾ç½®é€æ˜åº¦ä¸º0.5ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
    border-radius: 5px 0 0 5px; //å€’è§’
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s;
    backdrop-filter: blur(5px);
    /* æ·»åŠ æ¨¡ç³Šæ•ˆæœï¼Œæ•°å€¼5pxè¡¨ç¤ºæ¨¡ç³Šç¨‹åº¦ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ */
    -webkit-backdrop-filter: blur(5px);
    /* é’ˆå¯¹webkitå†…æ ¸çš„æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Safariï¼‰çš„å‰ç¼€å†™æ³• */
}
.toggle-border:hover {
    background-color: #3a8fd9;
}

/* æ·»åŠ éšè—/æ˜¾ç¤ºå›¾æ ‡æ ·å¼ */
.toggle-border::before {
    content: '<';
    /* é»˜è®¤æ˜¾ç¤º < å›¾æ ‡ */
    color: #FF0080;
    font-size: 20px;
    font-weight: bold;
}
.music-player.expanded .toggle-border::before {
    content: '>';
    /* æ’­æ”¾å™¨å±•å¼€æ—¶æ˜¾ç¤º > å›¾æ ‡ */
    color: #fff;
}

/* æŒ‰é’®é€šç”¨æ ·å¼ */
.circle-btn {
    width: 50px;
    height: 50px;
    background-color: transparent;
    /*æŒ‰é’®è°ƒä¸ºé€æ˜*/
    border-radius: 50%;
    display: flex;
    justify-content: center;
    /* æ°´å¹³å±…ä¸­ */
    align-items: center;
    /* å‚ç›´å±…ä¸­ */
    cursor: pointer;
    border: none;
    outline: none;
    transition: background-color 0.3s;
}
.circle-btn:hover {
    background-color: #3a8fd9;
}

/* æ’­æ”¾å›¾æ ‡æ ·å¼ */
.play-icon {
    width: 0;
    height: 0;
    border-left: 20px solid white;
    border-top: 12px solid transparent;
    border-bottom: 12px solid transparent;
    margin-left: 5px;
}

/* æš‚åœå›¾æ ‡æ ·å¼ï¼ˆä¸¤æ¡ç«–çº¿ï¼‰ */
.pause-icon {
    display: flex;
    gap: 6px;
}
.pause-icon::before,
.pause-icon::after {
    content: '';
    width: 6px;
    height: 20px;
    background-color: white;
}

/* ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–å›¾æ ‡æ ·å¼ */
.prev-icon,
.next-icon {
    width: 0;
    height: 0;
    border-top: 12px solid transparent;
    border-bottom: 12px solid transparent;
}
.prev-icon {
    border-right: 16px solid white;
    margin-right: 5px;
}
.next-icon {
    border-left: 16px solid white;
    margin-left: 5px;
}

/* éŸ³ä¹åˆ—è¡¨æŒ‰é’®æ ·å¼ï¼ˆä¸‰æ¡æ¨ªæ ï¼‰ */
.list-icon {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.list-icon::before,
.list-icon::after,
.list-icon div {
    content: '';
    width: 20px;
    height: 3px;
    background-color: white;
}

/* éŸ³é‡æ§åˆ¶æ»‘å—æ ·å¼ */
#volume-control {
    width: 220px;
    /* ä¸ç¬¬ä¸€æ’æŒ‰é’®æ€»å®½åº¦ä¸€è‡´ */
    margin-top: 10px;
}

/* éŸ³ä¹åˆ—è¡¨æ ·å¼ */
.music3 {
    position: absolute;
    /* è®¾ç½®ä¸ºç»å¯¹å®šä½ */
    right: 5px;
    top: -255px;
    /*è°ƒæ•´éŸ³ä¹åˆ—è¡¨è·ç¦»å±å¹•åº•éƒ¨è·ç¦»176è¡Œå¯¹åº”è°ƒèŠ‚*/
    left: 0;
    /* ä¸æ’­æ”¾å™¨å·¦ä¾§å¯¹é½ */
    height: 205px;
    /* å¢åŠ æœ€å¤§é«˜åº¦ */
    width: 223px;
    /* å®½åº¦ä¸æ’­æ”¾å™¨ä¸€è‡´ */
    background-color: rgba(255,
    255,
    255,
    1);
    /* åŠé€æ˜èƒŒæ™¯ */
    padding: 15px;
    /* å¢åŠ å†…è¾¹è· */
    border-radius: 15px;
    /* æ›´åœ†æ¶¦çš„è¾¹è§’ */
    box-shadow: 0 6px 15px rgba(0,
    0,
    0,
    0.15);
    /* æ›´æ˜æ˜¾çš„é˜´å½± */
    display: none;
    overflow-y: auto;
    font-family: Arial,
    sans-serif;
    /* å­—ä½“ä¼˜åŒ– */
    font-size: 14px;
    /* å­—ä½“å¤§å° */
    color: #333!important;
    /* å­—ä½“é¢œè‰² */
    border: 1px solid #000;
    /* æ·»åŠ 1.5pxçš„é»‘è‰²å¤–è¾¹æ¡† */
    z-index: 1000;
    /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
}

/* åˆ—è¡¨é¡¹æ ·å¼ */
.music3 li {
    list-style: none;
    padding: 10px 15px;
    /* å¢åŠ å†…è¾¹è· */
    margin: 5px 0;
    /* å¢åŠ å¤–è¾¹è· */
    border-radius: 8px;
    /* åœ†è§’è¾¹æ¡† */
    background-color: #ffcccc;
    /* æ·¡è‰²èƒŒæ™¯ */
    cursor: pointer;
    transition: background-color 0.3s ease;
    /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
    display: flex;
    align-items: center;
    /* å‚ç›´å±…ä¸­ */
    justify-content: space-between;
    /* å†…å®¹åˆ†å¸ƒ */
}

/* åˆ—è¡¨é¡¹æ‚¬åœæ•ˆæœ */
.music3 li:hover {
    background-color: #e0e0e0;
    /* æ‚¬åœæ—¶çš„èƒŒæ™¯è‰² */
}

/* åˆ—è¡¨é¡¹é€‰ä¸­çŠ¶æ€ */
.music3 li.active {
    background-color: #4a9feb;
    /* é€‰ä¸­æ—¶çš„èƒŒæ™¯è‰² */
    color: #fff;
    /* é€‰ä¸­æ—¶çš„æ–‡å­—é¢œè‰² */
}

/* æ»šåŠ¨æ¡æ ·å¼ */
.music3::-webkit-scrollbar {
    width: 8px;
    /* æ»šåŠ¨æ¡å®½åº¦ */
}
.music3::-webkit-scrollbar-thumb {
    background-color: #ccc;
    /* æ»šåŠ¨æ¡é¢œè‰² */
    border-radius: 2px;
    /* æ»šåŠ¨æ¡åœ†è§’ */
}
.music3::-webkit-scrollbar-track {
    background-color: #f1f1f1;
    /* æ»šåŠ¨æ¡è½¨é“é¢œè‰² */
    border-radius: 2px;
    /* æ»šåŠ¨æ¡è½¨é“åœ†è§’ */
}

/* å…¬ä¼—å·æ–‡å­—æ ·å¼ */
.fengyanfengyu {
    text-align: center;
    /* æ°´å¹³å±…ä¸­ */
    margin-top: 10px;
    /* ä¸æ»‘å—çš„é—´è· */
    width: 100%;
    /* æ–‡å­—å®½åº¦é€‚åº”å®¹å™¨ */
    font-size: 14px;
    /* å­—ä½“å¤§å° */
    font-weight: bold;
    /* åŠ ç²—å­—ä½“ */
    text-shadow: 1px 1px 2px rgba(0,
    0,
    0,
    0.2);
    /* æ–‡å­—é˜´å½± */
    color: #4a9feb;
    /* æ–‡å­—è“è‰² */
    margin: 0;
    /* å»æ‰é»˜è®¤å¤–è¾¹è· */
    padding: 0;
    /* å»æ‰é»˜è®¤å†…è¾¹è· */
}

/* çŠ¶æ€æ¶ˆæ¯æ ·å¼ */
#status-message {
    position: fixed;
    left: 7px;
    bottom: 300px;
    max-width: 50%;
    background-color: #333;
    color: white;
    padding: 10px;
    border-radius: 5px;
    display: none;
}

/* ç¬¬ä¸€æ’æŒ‰é’®å®¹å™¨æ ·å¼ */
.controls-row {
    display: flex;
    gap: 5px;
    /* æŒ‰é’®ä¹‹é—´é—´éš”5px */
}
    </style>
</head>

<body>
    <h1>èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨</h1>
    <audio id="bg-music" loop></audio>
    <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
    <div class="music-player">
        <!-- éšè—æ—¶çš„å·¦ä¾§è¾¹æ¡† -->
        <div class="toggle-border" onclick="togglePlayer()"></div>
        <!-- éŸ³ä¹åˆ—è¡¨ -->
        <ul class="music3" id="music-list3"></ul>
        <!-- æ’­æ”¾å™¨å†…å®¹ -->
        <div class="controls-container">
            <!-- ç¬¬ä¸€æ’æŒ‰é’® -->
            <div class="controls-row">
                <button id="prev-btn" class="circle-btn">
                    <div class="prev-icon"></div>
                </button>
                <button id="toggle-btn" class="circle-btn">
                    <div class="play-icon"></div>
                </button>
                <button id="next-btn" class="circle-btn">
                    <div class="next-icon"></div>
                </button>
                <button id="list-btn" class="circle-btn">
                    <div class="list-icon">
                        <div>
                        </div> <!-- è¿™é‡Œçš„divå…ƒç´ ä¸èƒ½é—æ¼ -->
                    </div>
                </button>
            </div>
            <!-- æ–°å¢çš„ç¬¬äºŒæ’æŒ‰é’® -->
            <div class="controls-row-secondary">
                <button id="rewind-btn" class="circle-btn">
                    <div class="rewind-icon">âª</div>
                </button>
                <button class="circle-btn" disabled></button>
                <!-- å ä½æŒ‰é’® -->
                <button id="fast-forward-btn" class="circle-btn">
                    <div class="fast-forward-icon">â©</div>
                </button>
                <button class="circle-btn" disabled></button>
                <!-- å ä½æŒ‰é’® -->
            </div>
            <!-- éŸ³é‡æ§åˆ¶æ»‘å— -->
            <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.5">
            <p class="fengyanfengyu">å…¬ä¼—å·ï¼šé£è¨€é”‹è¯­88</p>
        </div>
    </div>
    <!-- çŠ¶æ€æ¶ˆæ¯ -->
    <div id="status-message"></div>
    <script>
        var musicFiles = [];
        var bgMusic = document.getElementById('bg-music');
        var toggleBtn = document.getElementById('toggle-btn');
        var prevBtn = document.getElementById('prev-btn');
        var nextBtn = document.getElementById('next-btn');
        var rewindBtn = document.getElementById('rewind-btn'); // å¿«é€€æŒ‰é’®
        var fastForwardBtn = document.getElementById('fast-forward-btn'); // å¿«è¿›æŒ‰é’®
        var listBtn = document.getElementById('list-btn');
        var musicList = document.getElementById('music-list3');
        var statusMessage = document.getElementById('status-message');
        var volumeControl = document.getElementById('volume-control');
        var currentIndex = 0;
        var musicPlaying = false;
        // åŠ è½½éŸ³ä¹åˆ—è¡¨
        function loadMusicList() {
            fetch('https://yf1688.top/static/music/music-list.json')
                .then(response => response.json())
                .then(data => {
                    musicFiles = data.musicFiles;
                    musicFiles.forEach((music, index) => {
                        var li = document.createElement('li');
                        li.innerText = music.split('/').pop();
                        li.addEventListener('click', () => {
                            playSelectedMusic(index);
                        });
                        musicList.appendChild(li);
                    });
                    currentIndex = Math.floor(Math.random() * musicFiles.length);
                    playSelectedMusic(currentIndex);
                })
                .catch(error => {
                    console.error('åŠ è½½éŸ³ä¹åˆ—è¡¨å¤±è´¥ï¼š', error);
                    showStatus('æ— æ³•åŠ è½½éŸ³ä¹åˆ—è¡¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚');
                });
        }

        function playSelectedMusic(index) {
            currentIndex = index;
            bgMusic.src = musicFiles[index];
            bgMusic.play().then(() => {
                toggleBtn.innerHTML = '<div class="pause-icon"></div>';
                showStatus('æ­£åœ¨æ’­æ”¾ï¼š' + musicFiles[index].split('/').pop());
                musicPlaying = true;
            }).catch((error) => {
                console.error('æ’­æ”¾å¤±è´¥ï¼š', error);
                showStatus('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè‡ªåŠ¨æ’­æ”¾éŸ³ä¹ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾å™¨ç»§ç»­æ¬£èµæ­Œæ›²å§~');
            });
        }
        // ä¸Šä¸€é¦–
        function playPrev() {
            currentIndex = (currentIndex - 1 + musicFiles.length) % musicFiles.length;
            playSelectedMusic(currentIndex);
        }
        // ä¸‹ä¸€é¦–
        function playNext() {
            currentIndex = (currentIndex + 1) % musicFiles.length;
            playSelectedMusic(currentIndex);
        }
        // å¿«é€€åŠŸèƒ½æç¤º
        function promptRewind() {
            showStatus('~å”‰ï¼ğŸ˜‚è¯¥åŠŸèƒ½çœŸçš„è¿˜æ²¡å¼€å‘â€¦â€¦');
        }
        // å¿«è¿›åŠŸèƒ½æç¤º
        function promptFastForward() {
            showStatus('~å”‰ï¼ğŸ˜‚è¯¥åŠŸèƒ½æš‚æ—¶è¿˜æœªå¼€å‘â€¦â€¦');
        }
        //éŸ³ä¹åˆ—è¡¨éšè—å±•å¼€
        function toggleMusicList() {
            musicList.style.display = musicList.style.display === 'block' ? 'none' : 'block';
        }

        function showStatus(message) {
            statusMessage.innerText = message;
            statusMessage.style.display = 'block';
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 5000); //æ¶ˆæ¯åœç•™æ—¶é—´
        }

        function toggleMusic() {
            if (musicPlaying) {
                if (bgMusic.paused) {
                    bgMusic.play();
                    toggleBtn.innerHTML = '<div class="pause-icon"></div>';
                    showStatus('ç»§ç»­æ’­æ”¾éŸ³ä¹');
                } else {
                    bgMusic.pause();
                    toggleBtn.innerHTML = '<div class="play-icon"></div>';
                    showStatus('éŸ³ä¹å·²æš‚åœ');
                }
            } else {
                bgMusic.play().then(() => {
                    toggleBtn.innerHTML = '<div class="pause-icon"></div>';
                    showStatus('æ­£åœ¨ä¸ºä½ æ’­æ”¾éŸ³ä¹');
                    musicPlaying = true;
                }).catch((error) => {
                    console.error('è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼š', error);
                    showStatus('æ’­æ”¾å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾');
                });
            }
        }
        volumeControl.addEventListener('input', () => {
            const volume = parseFloat(volumeControl.value);
            bgMusic.volume = volume;
            document.querySelectorAll('.fengyanfengyu').forEach(text => {
                text.style.color = volume >= 0.6 ? '#ff69b4' : '#00cc66';
            }); //éŸ³é‡å¤šå°‘è°ƒèŠ‚é¢œè‰²å˜åŒ–
        });

        function togglePlayer() {
            var player = document.querySelector('.music-player');
            player.classList.toggle('expanded');
            if (!player.classList.contains('expanded')) {
                closeMusicList();
            }
        }

        function closeMusicList() {
            if (musicList.style.display === 'block') {
                musicList.style.display = 'none';
            }
        }
        let hideTimer;

        function hidePlayer() {
            const player = document.querySelector('.music-player');
            if (player.classList.contains('expanded')) {
                player.classList.remove('expanded');
                closeMusicList();
            }
            clearTimeout(hideTimer);
        }

        function resetTimer() {
            clearTimeout(hideTimer);
            hideTimer = setTimeout(hidePlayer, 5000);
        } //è¡¨ç¤º5ç§’åè‡ªåŠ¨éšè—æ’­æ”¾å™¨
        document.addEventListener('DOMContentLoaded', () => {
            loadMusicList();
            const player = document.querySelector('.music-player');
            player.addEventListener('mouseover', resetTimer);
            player.addEventListener('mouseout', resetTimer);
            player.addEventListener('click', resetTimer);
            setTimeout(() => {
                togglePlayer();
                resetTimer();
            }, 3000); //è®¾ç½®ç½‘é¡µåŠ è½½3ç§’åå¼¹å‡ºæ’­æ”¾å™¨
            prevBtn.addEventListener('click', () => {
                playPrev();
                resetTimer();
            });
            toggleBtn.addEventListener('click', () => {
                toggleMusic();
                resetTimer();
            });
            nextBtn.addEventListener('click', () => {
                playNext();
                resetTimer();
            });
            listBtn.addEventListener('click', () => {
                toggleMusicList();
                resetTimer();
            });
            volumeControl.addEventListener('input', () => {
                resetTimer();
            });
            // æ·»åŠ å¿«é€€å’Œå¿«è¿›çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œæ˜¾ç¤ºæç¤º
            rewindBtn.addEventListener('click', () => {
                promptRewind(); // æ˜¾ç¤ºå¿«é€€æç¤º
                resetTimer();
            });
            fastForwardBtn.addEventListener('click', () => {
                promptFastForward(); // æ˜¾ç¤ºå¿«è¿›æç¤º
                resetTimer();
            });
            // æ·»åŠ æ­Œæ›²æ’­æ”¾ç»“æŸçš„äº‹ä»¶ç›‘å¬å™¨
            bgMusic.addEventListener('ended', () => {
                playNext(); // å½“å‰æ­Œæ›²æ’­æ”¾ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–
            });
        });
    </script>
</body>

</html>