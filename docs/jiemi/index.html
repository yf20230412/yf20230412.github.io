<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="http://www.2015888.xyz/jiemi/static/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://www.2015888.xyz/jiemi/static/img/favicon.ico">
    <link rel="shortcut icon" href="http://www.2015888.xyz/jiemi/static/img/favicon.ico">
    <link rel="Bookmark" href="http://www.2015888.xyz/jiemi/static/img/favicon.ico">
    <link rel="stylesheet" href="http://www.2015888.xyz/jiemi/static/css/style.css">
    <title>TVBoxæ¥å£è§£å¯†</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          margin: 20px;
        }
        
        h1 {
          text-align: center;
          margin-bottom: 20px;
        }
        
        #output {
          background-color: #DCDFE6;
          color: black;
          width: calc(100% - 10px); /* é»˜è®¤å®½åº¦ï¼Œç•™å‡ºå·¦å³é—´è· */
          resize: none;
          margin: 0 auto;
          display: block;
        }
        
        #input-container {
          display: flex;
          align-items: stretch;
          margin-bottom: 20px;
          width: 100%; /* ç¡®ä¿å®¹å™¨å®½åº¦ä¸º100% */
          box-sizing: border-box; /* åŒ…æ‹¬å†…è¾¹è·å’Œè¾¹æ¡† */
        }
        
        #input-wrapper {
          flex: 3;
          position: relative;
          border: 1px solid #ccc;
          box-sizing: border-box; /* åŒ…æ‹¬å†…è¾¹è·å’Œè¾¹æ¡† */
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        #input-field {
          width: 100%;
          padding: 11px 30px 11px 11px; /* å³ä¾§ç•™å‡ºæ›´å¤šç©ºé—´ */
          padding-right: 30px; /* ä»¥ç¡®ä¿æ–‡æœ¬ä¸ä¼šä¸æ¸…é™¤æŒ‰é’®é‡å  */
          border: none;
          font-size: 14px;
          outline: none;
          box-sizing: border-box;
        }
        
        #input-wrapper #clear-input-button {
            position: absolute;
            right: 8px; /* è°ƒæ•´è·ç¦»å³ä¾§çš„è·ç¦» */
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: 1px solid #ccc;
            cursor: pointer;
            font-size: 10px; /* è°ƒæ•´å­—ä½“å¤§å° */
            color: red;
            width: 12px; /* è°ƒæ•´æŒ‰é’®å®½åº¦ */
            height: 12px; /* è°ƒæ•´æŒ‰é’®é«˜åº¦ */
            border-radius: 50%; /* ç¡®ä¿æŒ‰é’®ä¸ºåœ†å½¢ */
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            display: none; /* é»˜è®¤éšè— */
            box-sizing: border-box;
            padding: 0; /* ç§»é™¤å†…è¾¹è· */
        }
        
        /* è¾“å…¥æ¡†é€‰ä¸­æ•ˆæœ */
        #input-field:focus {
            outline: 1.5px solid #1e90ff; /* ä¿®æ”¹é¢œè‰²è½®å»“ */
        }
        
        
        #clear-input-button:hover {
          color: #999;
          background-color: #f0f0f0; /* é¼ æ ‡æ‚¬åœæ—¶æ·»åŠ èƒŒæ™¯è‰² */
        }
        
        /* ç”µè„‘æ¨¡å¼ */
        @media (min-width: 768px) {
          #input-wrapper #clear-input-button {
            width: 28px; /* æ¡Œé¢æ¨¡å¼ä¸‹ç¨å¤§ä¸€äº› */
            height: 28px;
            font-size: 18px; /* æ¡Œé¢æ¨¡å¼ä¸‹å­—ä½“ç¨å¤§ */
          }
        }
        
        #input-container button {
          flex: 1;
          padding: 11px 10px;
          cursor: pointer;
          margin-right: 0;
          background-color: #f9f9f9;
          font-size: 14px;
          white-space: nowrap;
          color: orange;
          border: 1px solid #ccc;
          border-left: none;
        }
        
        #error-message {
          color: red;
          display: none;
          margin-top: 10px;
          margin-bottom: 10px;
        }
        
        #loading-message {
          color: red;
          display: none;
          margin-top: 10px;
          margin-bottom: 10px;
        }
        
        #output-container {
          margin-top: 20px;
        }
        
        #button-container {
          display: flex;
          justify-content: center; /* æŒ‰é’®å±…ä¸­æ˜¾ç¤º */
          margin-top: 10px;
          width: 100%; /* æŒ‰é’®å®¹å™¨å®½åº¦ä¸è¾“å‡ºæ¡†ä¸€è‡´ */
          max-width: calc(100% - 10px); /* æœ€å¤§å®½åº¦ä¸è¶…è¿‡è¾“å‡ºæ¡† */
          box-sizing: border-box; /* åŒ…æ‹¬å†…è¾¹è·å’Œè¾¹æ¡† */
        }
        
        #button-container button {
          flex: 1; /* æŒ‰é’®å¹³å‡åˆ†é…å®½åº¦ */
          margin: 0 5px;
          padding: 11px 10px; /* è°ƒæ•´å†…è¾¹è· */
          cursor: pointer;
          color: white;
          border: none;
          white-space: nowrap;
          border-radius: 8px; /* æ·»åŠ åœ†è§’æ•ˆæœ */
          font-size: 14px; /* ç»Ÿä¸€å­—ä½“å¤§å° */
          max-width: 25%; /* æ¯ä¸ªæŒ‰é’®æœ€å¤§å®½åº¦ä¸º25% */
          overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
          text-overflow: ellipsis; /* è¶…å‡ºéƒ¨åˆ†æ˜¾ç¤ºçœç•¥å· */
        }
        
        #copy-output-button {
          background-color: #2196F3;
        }
        
        #download-jar-button {
          background-color: #0ac30a;
        }
        
        #home-button {
          background-color: #FF9800;
        }
        
        #clear-button {
          background-color: #6666ff;
        }
        
        /* é€‰æ‹©é¡¹æ ·å¼ */
        .options {
            border: 1px solid #ccc;
            max-height: 350px; /* æœ€å¤§é«˜åº¦ */
            overflow-y: auto; /* è¶…å‡ºéƒ¨åˆ†æ»šåŠ¨ */
            display: none; /* åˆå§‹éšè— */
            position: absolute; /* ç»å¯¹å®šä½ */
            background: white; /* èƒŒæ™¯é¢œè‰² */
            z-index: 1000; /* ç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
            width: calc(100% - 10px); /* é€‰é¡¹åˆ—è¡¨å®½åº¦ä¸è¾“å…¥æ¡†å’ŒæŒ‰é’®æ€»å®½åº¦ä¸€è‡´ */
            left: 0; /* ç¡®ä¿å·¦ä¾§å¯¹é½ */
            max-width: 1000px; /* è®¾ç½®ä¸‹æ‹‰æ¡†çš„æœ€å¤§å®½åº¦ */
        }
        
        .option {
          padding: 10px;
          cursor: pointer;
          display: flex; /* ä½¿ç”¨Flexboxå¸ƒå±€ */
          justify-content: flex-start; /* æ”¹ä¸ºå·¦å¯¹é½ */
          white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
          overflow: hidden; /* é˜²æ­¢è¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º */
          gap: 10px; /* è®¾ç½®åç§°å’ŒURLä¹‹é—´çš„é—´è· */
        }
        
        .url {
          overflow: hidden; /* è¶…å‡ºéƒ¨åˆ†éšè— */
          text-overflow: ellipsis; /* è¶…å‡ºéƒ¨åˆ†ç”¨çœç•¥å·è¡¨ç¤º */
          white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
          max-width: 200px; /* è®¾ç½®URLçš„æœ€å¤§å®½åº¦ */
          margin-left: 10px; /* URLå·¦è¾¹è· */
        }
        
        .scrollable {
          overflow-x: auto; /* æ¨ªå‘æ»šåŠ¨ */
          white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
        }
        
        /* æ‰‹æœºæ¨¡å¼ */
        @media (max-width: 767px) {
            #output {
                width: calc(100% - 10px); /* ç¡®ä¿è¾“å‡ºæ¡†å®½åº¦ä¸è¾“å…¥æ¡†ä¸€è‡´ */
                height: calc(100vh - 300px); /* å¢åŠ è¾“å‡ºæ¡†é«˜åº¦50px */
            }
        
            #input-container {
                width: calc(100% - 10px); /* ç¡®ä¿è¾“å…¥æ¡†å®½åº¦ä¸è¾“å‡ºæ¡†ä¸€è‡´ */
                margin-left: 0; /* å–æ¶ˆå·¦è¾¹è· */
                margin-right: 0; /* å–æ¶ˆå³è¾¹è· */
            }
        
            #input-field {
                padding: 11px 30px 11px 11px; /* æ‰‹æœºæ¨¡å¼ä¸‹è°ƒæ•´è¾“å…¥æ¡†å†…è¾¹è· */
            }
        
            #input-container button {
                padding: 11px 10px; /* æ‰‹æœºæ¨¡å¼ä¸‹è°ƒæ•´æŒ‰é’®å†…è¾¹è· */
            }
        
            #output-container {
                width: calc(100% - 10px); /* ç¡®ä¿è¾“å‡ºæ¡†å®½åº¦ä¸è¾“å…¥æ¡†ä¸€è‡´ */
                margin-left: 0; /* å–æ¶ˆå·¦è¾¹è· */
                margin-right: 0; /* å–æ¶ˆå³è¾¹è· */
            }
        
            .options {
                width: calc(100% - 10px); /* ç¡®ä¿é€‰æ‹©æ¡†å®½åº¦ä¸è¾“å…¥æ¡†ä¸€è‡´ */
                left: 0; /* ç¡®ä¿å·¦ä¾§å¯¹é½ */
            }
        }
        
        /* ç”µè„‘æ¨¡å¼ */
        @media (min-width: 768px) {
            #input-container,
            #output-container {
                width: calc(100% - 250px); /* ç»Ÿä¸€å®½åº¦ï¼Œç¡®ä¿å¯¹é½ */
                margin-left: auto;
                margin-right: auto;
            }
        
            #output {
                width: 100%; /* è¾“å‡ºæ¡†å®½åº¦ä¸è¾“å…¥æ¡†å’ŒæŒ‰é’®å¯¹é½ */
            }
        
            #input-field {
                padding: 15px 30px 15px 15px; /* æ¡Œé¢æ¨¡å¼ä¸‹å¢åŠ è¾“å…¥æ¡†é«˜åº¦ */
            }
        
            #input-container button {
                flex: 0 1 auto; /* æŒ‰é’®å®½åº¦æ ¹æ®å†…å®¹è‡ªé€‚åº” */
                padding: 15px 20px; /* æ¡Œé¢æ¨¡å¼ä¸‹å¢åŠ æŒ‰é’®é«˜åº¦ */
            }
        
            .options {
                width: calc(100% - 250px); /* ç¡®ä¿é€‰æ‹©æ¡†å®½åº¦ä¸è¾“å…¥æ¡†å’ŒæŒ‰é’®æ€»å®½åº¦ä¸€è‡´ */
                left: 0; /* ç¡®ä¿å·¦ä¾§å¯¹é½ */
            }
            /* æ–°å¢ï¼šè°ƒæ•´æŒ‰é’®å®¹å™¨çš„å®½åº¦å’Œå±…ä¸­æ˜¾ç¤º */
            #button-container {
        width: auto; /* å®½åº¦æ ¹æ®å†…å®¹è‡ªé€‚åº” */
        max-width: none; /* å–æ¶ˆæœ€å¤§å®½åº¦é™åˆ¶ */
        justify-content: center; /* æŒ‰é’®å±…ä¸­æ˜¾ç¤º */
        margin-left: auto;
        margin-right: auto;
            }
        
            /* æ–°å¢ï¼šè°ƒæ•´æŒ‰é’®å®½åº¦åŒ…è£¹å†…å®¹ */
            #button-container button {
        flex: 0 1 auto; /* æŒ‰é’®å®½åº¦æ ¹æ®å†…å®¹è‡ªé€‚åº” */
        max-width: none; /* å–æ¶ˆæœ€å¤§å®½åº¦é™åˆ¶ */
        padding: 11px 20px; /* è°ƒæ•´å†…è¾¹è· */
            }
        }
        
        /* å®šä¹‰æ¸å˜åŠ¨ç”» */
        @keyframes gradientAnimation {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        /* è®¾ç½® footer æ ·å¼ */
        footer {
            position: fixed; /* å›ºå®šåœ¨é¡µé¢åº•éƒ¨ */
            bottom: 0; /* è·ç¦»åº•éƒ¨ 0 */
            left: 0; /* å·¦ä¾§å¯¹é½ */
            width: 100%; /* å®½åº¦å æ»¡å±å¹• */
            background-color: #000000; /* èƒŒæ™¯é¢œè‰² */
            padding: 20px 0 10px 0; /* ä¸Šå†…è¾¹è·å¢åŠ ä¸º 20pxï¼Œä¸‹å†…è¾¹è·ä¿æŒ 10px å·¦å³å†…è¾¹è·ä¸º0 */
            text-align: center; /* æ–‡å­—å±…ä¸­ */
            border-top: 1px solid #00ff00; /* é¡¶éƒ¨è¾¹æ¡† */
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* æ·»åŠ é˜´å½± */
            z-index: 1000; /* ç¡®ä¿ footer åœ¨æœ€ä¸Šå±‚ */
        }
        
        /* è®¾ç½®é“¾æ¥æ ·å¼ */
        footer a {
            background: linear-gradient(45deg, red, yellow, green, cyan, blue, magenta); /* æ¸å˜èƒŒæ™¯ */
            background-size: 200% 200%; /* èƒŒæ™¯å¤§å° */
            -webkit-background-clip: text; /* å…¼å®¹ WebKit æµè§ˆå™¨ */
            background-clip: text; /* æ–‡å­—è£å‰ªèƒŒæ™¯ */
            color: transparent; /* æ–‡å­—é¢œè‰²é€æ˜ */
            text-decoration: none; /* å»æ‰ä¸‹åˆ’çº¿ */
            transition: background 0.5s ease; /* èƒŒæ™¯è¿‡æ¸¡æ•ˆæœ */
            animation: gradientAnimation 3s infinite alternate; /* åº”ç”¨åŠ¨ç”» */
            font-size: 16px; /* å­—ä½“å¤§å° */
        }
        
        /* é¼ æ ‡æ‚¬åœæ—¶åœæ­¢åŠ¨ç”» */
        footer a:hover {
            animation-play-state: paused; /* æš‚åœåŠ¨ç”» */
        }
        
        /* è®¾ç½® mark æ ‡ç­¾æ ·å¼ */
        footer mark {
            background-color: #ffff00; /* èƒŒæ™¯é¢œè‰² */
            color: #ff0033; /* æ–‡å­—é¢œè‰² */
            padding: 2px 5px; /* å†…è¾¹è· */
            border-radius: 3px; /* åœ†è§’ */
        }
    </style>
</head>

<body>
    <h1>TVBoxæ¥å£è§£å¯†</h1>

    <div id="input-container">
        <div id="input-wrapper">
            <input type="text" id="input-field" placeholder="ç‚¹å‡»ä¸‹æ‹‰é€‰æ‹©..." onclick="toggleOptions()" autocomplete="off">
            <button id="clear-input-button" onclick="clearInput()">Ã—</button>
            <div id="optionsList" class="options"></div>
        </div>
        <button onclick="copyInput()">å¤åˆ¶æ¥å£</button>
        <button onclick="getIPTV()">ä¸€é”®è§£ç </button>
    </div>

    <div id="error-message"></div>
    <div id="loading-message">æ¥å£æ­£åœ¨è§£å¯†ï¼Œè¯·ç¨å€™ï½</div>

    <div id="output-container">
        <textarea id="output" rows="30" cols="100" readonly></textarea>
        <div id="button-container">
            <button id="copy-output-button" onclick="copyOutput()">å¤åˆ¶å†…å®¹</button>
            <button id="download-jar-button" onclick="downloadJar()">ä¸‹è½½Jar</button>
            <button id="home-button" onclick="goToHome()">ä¸»é¡µ</button>
            <button id="clear-button" onclick="clearOutput()">ä¸€é”®æ¸…ç©º</button>
        </div>
    </div>
    <footer>
        <div align="center">
            <a target="_blank" href="https://mp.weixin.qq.com/s/zFyqLSwj5FXkMiupb5XdDQ" title="å¾®ä¿¡å…¬ä¼—å·ï¼šé£è¨€é”‹è¯­88" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šé£è¨€é”‹è¯­88">
                å¾®ä¿¡å…¬ä¼—å·ï¼š<mark>é£è¨€é”‹è¯­88</mark>
            </a>
        </div>
    </footer>

    <script>
        var inputField = document.getElementById("input-field");
        var clearInputButton = document.getElementById("clear-input-button");
        var optionsList = document.getElementById("optionsList");
        
        inputField.addEventListener("input", function () {
          if (inputField.value.trim() !== "") {
            clearInputButton.style.display = "flex";
          } else {
            clearInputButton.style.display = "none";
          }
        });
        
        function clearInput() {
          inputField.value = "";
          clearInputButton.style.display = "none";
          optionsList.style.display = "none"; // æ¸…ç©ºè¾“å…¥æ¡†æ—¶éšè—é€‰é¡¹åˆ—è¡¨
        }
        
        function toggleOptions() {
            const optionsList = document.getElementById('optionsList');
            const inputContainer = document.getElementById('input-container');
        
            if (optionsList.style.display === 'block') {
                optionsList.style.display = 'none'; // éšè—é€‰é¡¹åˆ—è¡¨
            } else {
                fetch('http://www.2015888.xyz/jiemi/M.php')
                    .then(response => response.json())
                    .then(data => {
                        optionsList.innerHTML = ''; // æ¸…ç©ºé€‰é¡¹åˆ—è¡¨
                        optionsList.style.width = `${inputContainer.offsetWidth}px`; // è®¾ç½®é€‰æ‹©æ¡†å®½åº¦
        
                        if (data.urls) {
                            data.urls.forEach(item => {
                                const option = document.createElement('div');
                                option.classList.add('option');
                                option.onclick = () => selectOption(item.url); // ç‚¹å‡»é€‰é¡¹æ—¶é€‰æ‹©URL
        
                                // åˆ›å»ºåç§°å’ŒURLçš„HTMLç»“æ„
                                const name = document.createElement('span');
                                name.textContent = item.name; // æ˜¾ç¤ºåç§°
                                const url = document.createElement('span');
                                url.textContent = item.url; // æ˜¾ç¤ºURL
                                url.classList.add('url'); // æ·»åŠ æ ·å¼ç±»
        
                                // æ·»åŠ ä¸€ä¸ªåŒ…è£¹URLçš„scrollableå®¹å™¨
                                const scrollable = document.createElement('div');
                                scrollable.classList.add('scrollable');
                                scrollable.appendChild(url);
        
                                option.appendChild(name);
                                option.appendChild(scrollable);
                                optionsList.appendChild(option);
                            });
                            optionsList.style.display = 'block'; // æ˜¾ç¤ºé€‰é¡¹åˆ—è¡¨
                        }
                    })
                    .catch(error => console.error('è·å–æ•°æ®å¤±è´¥:', error));
            }
        }        
        
        
        // é€‰æ‹©é€‰é¡¹å¹¶æ›´æ–°è¾“å…¥æ¡†
        function selectOption(url) {
            inputField.value = url; // å°†é€‰æ‹©çš„URLå¡«å……åˆ°è¾“å…¥æ¡†ä¸­
            optionsList.style.display = 'none'; // éšè—é€‰é¡¹åˆ—è¡¨
            clearInputButton.style.display = "flex"; // æ¿€æ´»æ¸…é™¤æŒ‰é’®
        }
        
        // ç‚¹å‡»è¾“å…¥æ¡†å¤–éƒ¨æ—¶å…³é—­é€‰é¡¹åˆ—è¡¨
        document.addEventListener('click', function (event) {
          if (!event.target.closest('#input-wrapper')) {
            optionsList.style.display = 'none'; // å¦åˆ™éšè—é€‰é¡¹åˆ—è¡¨
          }
        });
        
        function getIPTV() {
          var input = inputField.value;
        
          if (input === "") {
            showErrorMessage("è¯·è¾“å…¥æ¥å£é“¾æ¥ï¼");
            return;
          }
        
          document.getElementById("loading-message").style.display = "block";
          document.getElementById("error-message").style.display = "none";
        
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "http://www.2015888.xyz/jiemi/get_jiemi.php", true);
          xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
          xhr.send("url=" + input);
        
          xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
              document.getElementById("loading-message").style.display = "none";
        
              if (xhr.status == 200) {
                var response = xhr.responseText;
                if (response.trim() === "") {
                  showErrorMessage("PHPè„šæœ¬æœªè·å–åˆ°å†…å®¹ï¼Œè¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®ã€‚");
                } else {
                  document.getElementById("output").value = response;
                }
              } else {
                showErrorMessage("è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•ã€‚");
              }
            }
          };
        }
        
        function toggleLoading(isLoading) {
          if (isLoading) {
            document.body.style.cursor = "progress";
          } else {
            document.body.style.cursor = "default";
          }
        }
        
        function copyInput() {
          if (inputField.value === "") {
            showErrorMessage("è¾“å…¥æ¡†ä¸ºç©ºï¼Œæ— æ³•å¤åˆ¶ï¼");
            return;
          }
          inputField.select();
          document.execCommand("copy");
          alert("å·²å¤åˆ¶æ¥å£é“¾æ¥åˆ°å‰ªè´´æ¿ï¼");
        }
        
        function copyOutput() {
          var outputField = document.getElementById("output");
          if (outputField.value.trim() === "") {
            showErrorMessage("è¾“å‡ºæ¡†ä¸ºç©ºï¼Œæ— æ³•å¤åˆ¶ï¼");
            return;
          }
          outputField.select();
          document.execCommand("copy");
          alert("å·²å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿ï¼");
        }
        
        
        
        //ä¸‹è½½jar
        function downloadJar() {
            var outputField = document.getElementById("output");
            var inputField = document.getElementById("input-field");
            var outputContent = outputField.value;
            var inputContent = inputField.value;
        
            if (outputContent.trim() === "") {
        alert("è¾“å‡ºæ¡†ä¸ºç©ºï¼Œæ— æ³•æå–é“¾æ¥ï¼");
        return;
            }
        
            if (inputContent.trim() === "") {
        alert("è¾“å…¥æ¡†ä¸ºç©ºï¼Œæ— æ³•è·å–é“¾æ¥ï¼");
        return;
            }
        
            // ä»è¾“å‡ºæ¡†ä¸­æå– spider å±æ€§ä¸‹çš„é“¾æ¥ï¼ˆä½¿ç”¨æ­£åˆ™ï¼‰
            var linkMatch = outputContent.match(/"spider":\s*"(.*?)(?=[";])/);
            var fileLink = null;
        
            if (linkMatch && linkMatch[1]) {
        var spiderLink = linkMatch[1].trim(); // æå–çš„å†…å®¹
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯ä»¥ http æˆ– https å¼€å¤´
        if (spiderLink.startsWith("http://") || spiderLink.startsWith("https://")) {
            fileLink = spiderLink; // ç›´æ¥ä½¿ç”¨è¯¥é“¾æ¥
        }
        // æ£€æŸ¥æ˜¯å¦æ˜¯ä»¥ ./ å¼€å¤´
        else if (spiderLink.startsWith("./")) {
            // æå–ç›¸å¯¹è·¯å¾„
            var relativePath = spiderLink.substring(2); // å»æ‰ './'
        
            // ä»è¾“å…¥æ¡†ä¸­æå–åŸºç¡€é“¾æ¥ï¼ˆä½¿ç”¨æ­£åˆ™ï¼‰
            var baseLinkMatch = inputContent.match(/(http[s]?:\/\/[^\/]+\/[^\/]*)\//);
            if (!baseLinkMatch || !baseLinkMatch[1]) {
                alert("æœªæ‰¾åˆ°åŸºç¡€é“¾æ¥ï¼Œæ— æ³•æ„å»ºå®Œæ•´é“¾æ¥ï¼");
                return;
            }
            var baseLink = baseLinkMatch[1] + '/'; // ä¿ç•™åŸºç¡€é“¾æ¥çš„æœ€åä¸€ä¸ªæ–œæ 
        
            // æ‹¼æ¥æˆå®Œæ•´é“¾æ¥
            fileLink = baseLink + relativePath;
        }
            } else {
        alert("è¾“å‡ºæ¡†ä¸­æœªæ‰¾åˆ° spider å±æ€§ä¸‹çš„é“¾æ¥ï¼");
        return;
            }
        
            // å…ˆæç¤ºç”¨æˆ·è·å–åˆ°çš„é“¾æ¥
            //ğŸ˜€alert(`è·å–åˆ°çš„jaré“¾æ¥æ˜¯ï¼š${fileLink}`);
        
            // å®šä¹‰å…è®¸çš„åç¼€åˆ—è¡¨ï¼ˆç»Ÿä¸€å°å†™ï¼‰
            const allowedExtensions = ['.txt', '.json', '.jar', '.js', '.zip', '.bmp', '.jpg', '.webp', '.png'];
        
            // å°†é“¾æ¥è½¬æ¢ä¸ºå°å†™ï¼Œä»¥ä¾¿ä¸åŒºåˆ†å¤§å°å†™
            const lowerCaseFileLink = fileLink.toLowerCase();
        
            // åˆ¤æ–­é“¾æ¥åç¼€æ˜¯å¦ä¸ºå…è®¸çš„åç¼€ä¹‹ä¸€
            if (fileLink && !allowedExtensions.some(ext => lowerCaseFileLink.endsWith(ext))) {
        // æç¤ºç”¨æˆ·æ­£åœ¨è§£å¯†é“¾æ¥
        alert("æ­£åœ¨è§£å¯†jaré“¾æ¥ï¼Œè¯·ç‚¹å‡»ç¡®å®šåï¼Œè€å¿ƒç­‰å¾…5ç§’å·¦å³å³å¯...");
        // å¦‚æœé“¾æ¥åç¼€ä¸åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ï¼Œåˆ™è°ƒç”¨ get_real_link.php
        fetch('http://www.2015888.xyz/jiemi/get_real_link.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: `link=${encodeURIComponent(fileLink)}`
            })
            .then(response => {
                console.log('Response:', response); // æ‰“å°å“åº”å¯¹è±¡
                return response.json();
            })
            .then(data => {
                console.log('Data:', data); // æ‰“å°è¿”å›çš„æ•°æ®
                if (data.success) {
                    const realLink = data.realLink;
                    //ğŸ˜alert(`è§£å¯†åjarçœŸå®ä¸‹è½½åœ°å€ï¼š${realLink}`); // è°ƒè¯•ä¿¡æ¯
        
                    // æå–æ–‡ä»¶å
                    const fileName = realLink.substring(realLink.lastIndexOf('/') + 1);
        
                    // åˆ›å»ºä¸‹è½½é“¾æ¥
                    const downloadLink = document.createElement('a');
                    downloadLink.href = realLink;
                    downloadLink.download = fileName || 'downloaded_file.jar'; // ä½¿ç”¨æå–çš„æ–‡ä»¶åï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å
                    document.body.appendChild(downloadLink);
                    downloadLink.click();
                    document.body.removeChild(downloadLink);
                } else {
                    alert(`è·å–çœŸå®é“¾æ¥å¤±è´¥ï¼š${data.message}ï¼ŒåŸå§‹é“¾æ¥: ${fileLink}ï¼Œåç«¯å¤„ç†ä¸­çš„é“¾æ¥: ${data.originalLink}`);
                }
            })
            .catch(error => {
                alert(`è¯·æ±‚å¤±è´¥ï¼š${error.message}ï¼ŒåŸå§‹é“¾æ¥: ${fileLink}`);
            });
            } else {
        // å¦‚æœé“¾æ¥åç¼€åœ¨å…è®¸çš„åˆ—è¡¨ä¸­ï¼Œåˆ™ç›´æ¥ä¸‹è½½
        //ğŸ˜alert(`jarä¸‹è½½é“¾æ¥ï¼š${fileLink}`); // è°ƒè¯•ä¿¡æ¯
        function downloadFile(fileLink, customFileName = 'downloaded_file.jar') {
            // æå–æ–‡ä»¶å
            const fileName = fileLink.substring(fileLink.lastIndexOf('/') + 1);
        
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const downloadLink = document.createElement('a');
            downloadLink.href = fileLink;
            downloadLink.download = fileName || customFileName;
        
            // æ‰§è¡Œä¸‹è½½
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }
        
        // ä½¿ç”¨å‡½æ•°
        if (fileLink === 'http://bobohome.ignorelist.com:20247/æ½‡æ´’/spider.jar') {
            alert(`è­¦å‘Šâš ï¸ : å¦‚æœæ— æ³•è§¦å‘ä¸‹è½½ï¼Œè¯·å°†æµè§ˆå™¨UAè®¾ç½®æˆ  okhttp/3. ç„¶åå†é‡æ–°ç‚¹å‡»ä¸‹è½½`);
        }
        downloadFile(fileLink);
        
            }
        
        }
        
        
        
        
        
        
        //ä¸»é¡µ
        
        function goToHome() {
          window.location.href = "https://yf1688.top/box2/";
        }
        
        
        //ä¸€é”®æ¸…ç©º
        function clearOutput() {
          var inputField = document.getElementById("input-field");
          var outputField = document.getElementById("output");
        
          // æ£€æŸ¥è¾“å…¥æ¡†å’Œè¾“å‡ºæ¡†æ˜¯å¦éƒ½ä¸ºç©º
          if (inputField.value.trim() === "" && outputField.value.trim() === "") {
            showErrorMessage("è¾“å…¥æ¡†å’Œè¾“å‡ºæ¡†éƒ½ä¸ºç©ºï¼Œæ— éœ€æ¸…ç©ºï¼"); // æç¤ºé”™è¯¯ä¿¡æ¯
            return;
          }
        
          // æ¸…ç©ºè¾“å…¥æ¡†å’Œè¾“å‡ºæ¡†
          inputField.value = "";
          outputField.value = "";
          clearInputButton.style.display = "none";
          optionsList.style.display = 'none'; // æ¸…ç©ºè¾“å‡ºæ—¶éšè—é€‰é¡¹åˆ—è¡¨
        }
        
        function showErrorMessage(message) {
          var errorMessage = document.getElementById("error-message");
          errorMessage.textContent = message;
          errorMessage.style.display = "block";
        }
        
        document.getElementById("output").readOnly = true;
    </script>
</body>

</html>